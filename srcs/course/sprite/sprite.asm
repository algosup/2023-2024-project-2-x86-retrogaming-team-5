org 100h

%define SCREENW 320
%define SCREENH 200

%define SPRITEW 16
%define SPRITEH 16
section .data

xPos dw 16000

GPos dw 14500

xVelocity dw 1

spritew dw 16

spriteh dw 16

old_XPOS dw 0



pacmanOpen db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
           db 0x00, 0x00, 0x00, 0x00, 0x00, 0x2b, 0x2c, 0x2c, 0x2c, 0x5c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
           db 0x00, 0x00, 0x00, 0x2b, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x5c, 0x00, 0x00, 0x00, 0x00
           db 0x00, 0x00, 0x2b, 0x2c, 0x2c, 0x0f, 0x00, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x5c, 0x00, 0x00, 0x00
           db 0x00, 0x00, 0x2b, 0x2c, 0x2c, 0x00, 0x00, 0x2c, 0x2c, 0x2c, 0x5c, 0x5c, 0x00, 0x00, 0x00, 0x00
           db 0x00, 0x2b, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x5c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
           db 0x00, 0x2b, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
           db 0x00, 0x2b, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
           db 0x00, 0x2b, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
           db 0x00, 0x2b, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x5c, 0x5c, 0x00, 0x00, 0x00, 0x00, 0x00
           db 0x00, 0x00, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x5c, 0x5c, 0x5c, 0x00, 0x00, 0x00
           db 0x00, 0x00, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x5c, 0x00, 0x00, 0x00
           db 0x00, 0x00, 0x00, 0x2b, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x5c, 0x5c, 0x00, 0x00, 0x00, 0x00
           db 0x00, 0x00, 0x00, 0x00, 0x00, 0x2b, 0x2b, 0x2b, 0x2c, 0x2c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
           db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
           db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00

pacmanClose db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x2b, 0x2c, 0x2c, 0x2c, 0x5c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x2b, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x5c, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x2b, 0x2c, 0x2c, 0x0f, 0x00, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x5c, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x2b, 0x2c, 0x2c, 0x00, 0x00, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x5c, 0x00, 0x00, 0x00
            db 0x00, 0x2b, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x5c, 0x00, 0x00
            db 0x00, 0x2b, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x00, 0x00
            db 0x00, 0x2b, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x00, 0x00
            db 0x00, 0x2b, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x2b, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x5c, 0x00, 0x00
            db 0x00, 0x00, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x5c, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x2b, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x5c, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x2b, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x5c, 0x5c, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x2b, 0x2b, 0x2b, 0x2c, 0x2c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00

cerise      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x02, 0x02, 0x02, 0x00, 0x00, 0x00, 0x02, 0x02, 0x02, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x0A, 0x0A, 0x0A, 0x02, 0x00, 0x02, 0x0A, 0x0A, 0x02, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x02, 0x0A, 0x02, 0x02, 0x0A, 0x0A, 0x02, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x00, 0x02, 0x02, 0x02, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x04, 0x04, 0x04, 0x04, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x04, 0x28, 0x28, 0x28, 0x28, 0x04, 0x04, 0x04, 0x04, 0x04, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x04, 0x28, 0x28, 0x28, 0x28, 0x28, 0x04, 0x28, 0x28, 0x28, 0x28, 0x04, 0x00, 0x00
            db 0x00, 0x00, 0x04, 0x28, 0x0C, 0x28, 0x28, 0x04, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x04, 0x00
            db 0x00, 0x00, 0x04, 0x28, 0x0C, 0x28, 0x28, 0x04, 0x28, 0x0C, 0x28, 0x28, 0x28, 0x28, 0x04, 0x00
            db 0x00, 0x00, 0x04, 0x28, 0x28, 0x0C, 0x28, 0x04, 0x28, 0x0C, 0x28, 0x28, 0x28, 0x28, 0x04, 0x00
            db 0x00, 0x00, 0x00, 0x04, 0x28, 0x28, 0x28, 0x04, 0x28, 0x28, 0x0C, 0x28, 0x28, 0x28, 0x04, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x04, 0x04, 0x04, 0x04, 0x04, 0x28, 0x28, 0x28, 0x28, 0x04, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x04, 0x04, 0x04, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
 
fraise      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x02, 0x02, 0x02, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x02, 0x0A, 0x02, 0x0A, 0x02, 0x0A, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x04, 0x28, 0x02, 0x28, 0x02, 0x28, 0x02, 0x28, 0x04, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x04, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x04, 0x04, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x04, 0x04, 0x28, 0x28, 0x28, 0x04, 0x28, 0x28, 0x04, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x04, 0x28, 0x28, 0x04, 0x28, 0x28, 0x28, 0x04, 0x04, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x04, 0x28, 0x28, 0x28, 0x28, 0x04, 0x28, 0x28, 0x04, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x04, 0x28, 0x04, 0x28, 0x28, 0x28, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x28, 0x28, 0x28, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x04, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00

orange      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x02, 0x02, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x02, 0x30, 0x30, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x30, 0x30, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x02, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x2A, 0x2A, 0x2A, 0x2A, 0x2A, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x2A, 0x2B, 0x2B, 0x2B, 0x2B, 0x2B, 0x2A, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x2A, 0x2B, 0x2B, 0x2B, 0x2B, 0x2B, 0x2B, 0x2B, 0x2A, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x2A, 0x2B, 0x2B, 0x2B, 0x2B, 0x2B, 0x2B, 0x2B, 0x2A, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x2A, 0x2B, 0x42, 0x2B, 0x2B, 0x2B, 0x2B, 0x2B, 0x2A, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x2A, 0x2B, 0x42, 0x2B, 0x2B, 0x2B, 0x2B, 0x2B, 0x2A, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x2A, 0x2B, 0x2B, 0x42, 0x2B, 0x2B, 0x2B, 0x2B, 0x2A, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x2A, 0x2B, 0x2B, 0x2B, 0x2B, 0x2B, 0x2A, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x2A, 0x2A, 0x2A, 0x2A, 0x2A, 0x00, 0x00, 0x00, 0x00, 0x00

pomme       db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x08, 0x08, 0x28, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x08, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x04, 0x04, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x08, 0x28, 0x28, 0x0f, 0x0f, 0x28, 0x28, 0x28, 0x04, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x08, 0x28, 0x28, 0x0f, 0x0f, 0x28, 0x28, 0x28, 0x28, 0x04, 0x04, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x08, 0x28, 0x28, 0x0f, 0x0f, 0x28, 0x28, 0x28, 0x28, 0x04, 0x04, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x08, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x04, 0x04, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x08, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x04, 0x04, 0x04, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x04, 0x28, 0x28, 0x28, 0x28, 0x04, 0x04, 0x04, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x04, 0x04, 0x04, 0x04, 0x04, 0x04, 0x04, 0x04, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x04, 0x00, 0x00, 0x04, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00

melon       db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x02, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x2F, 0x2F, 0x02, 0x2F, 0x2F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x2F, 0x07, 0x02, 0x2F, 0x2F, 0x2F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x2F, 0x2F, 0x02, 0x2F, 0x07, 0x02, 0x2F, 0x2F, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x2F, 0x2F, 0x02, 0x2F, 0x2F, 0x02, 0x2F, 0x2F, 0x2F, 0x2F, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x2F, 0x02, 0x07, 0x2F, 0x02, 0x07, 0x02, 0x2F, 0x02, 0x2F, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x2F, 0x2F, 0x02, 0x2F, 0x2F, 0x2F, 0x07, 0x02, 0x2F, 0x2F, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x2F, 0x2F, 0x2F, 0x02, 0x07, 0x2F, 0x02, 0x07, 0x2F, 0x2F, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x2F, 0x2F, 0x2F, 0x02, 0x2F, 0x2F, 0x2F, 0x2F, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x2F, 0x2F, 0x07, 0x02, 0x2F, 0x2F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x2F, 0x2F, 0x2F, 0x2F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00

galaxian    db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x20, 0x20, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x20, 0x20, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x20, 0x20, 0x0E, 0x28, 0x28, 0x28, 0x28, 0x28, 0x0E, 0x20, 0x20, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x20, 0x20, 0x0E, 0x28, 0x0E, 0x28, 0x0E, 0x28, 0x0E, 0x20, 0x20, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x20, 0x20, 0x0E, 0x0E, 0x28, 0x28, 0x28, 0x0E, 0x0E, 0x20, 0x20, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x20, 0x20, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x20, 0x20, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x20, 0x0E, 0x0E, 0x0E, 0x20, 0x20, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x00, 0x0E, 0x00, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
pLeftOpen   db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x5c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2b, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x5c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2b, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x5c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x00, 0x0f, 0x2c, 0x2c, 0x2b, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x5c, 0x5c, 0x2c, 0x2c, 0x2c, 0x2c, 0x00, 0x00, 0x2c, 0x2c, 0x2b, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x5c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2b, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2b, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2b, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2b, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x5c, 0x5c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2b, 0x00
            db 0x00, 0x00, 0x5c, 0x5c, 0x5c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x00, 0x00
            db 0x00, 0x00, 0x5c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2b, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x5c, 0x5c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2b, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x2c, 0x2c, 0x2b, 0x2b, 0x2b, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00

pLeftClose  db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x5c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2b, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x5c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2b, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x5c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x00, 0x0f, 0x2c, 0x2c, 0x2b, 0x00, 0x00
            db 0x00, 0x00, 0x5c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x00, 0x00, 0x2c, 0x2c, 0x2b, 0x00, 0x00
            db 0x00, 0x5c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2b, 0x00
            db 0x00, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2b, 0x00
            db 0x00, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2b, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2b, 0x00
            db 0x00, 0x5c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2b, 0x00
            db 0x00, 0x00, 0x5c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x00, 0x00
            db 0x00, 0x00, 0x5c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2b, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x5c, 0x5c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2b, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x2c, 0x2c, 0x2c, 0x2b, 0x2b, 0x2b, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00

pUpClose    db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x5c, 0x2c, 0x2c, 0x00, 0x5c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x5c, 0x5c, 0x2c, 0x2c, 0x2c, 0x00, 0x2c, 0x5c, 0x5c, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x5c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x00, 0x2c, 0x2c, 0x2c, 0x5c, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x00, 0x2c, 0x2c, 0x2c, 0x5c, 0x00, 0x00, 0x00
            db 0x00, 0x5c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x00, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x00, 0x00
            db 0x00, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x00, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x00, 0x00
            db 0x00, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x00, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x00, 0x00
            db 0x00, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2b, 0x00, 0x00
            db 0x00, 0x2c, 0x2c, 0x00, 0x00, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2b, 0x00, 0x00
            db 0x00, 0x2b, 0x2c, 0x0f, 0x00, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2b, 0x00, 0x00
            db 0x00, 0x00, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x2b, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2b, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x2b, 0x2b, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2b, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x2b, 0x2b, 0x2b, 0x2b, 0x2b, 0x2b, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00

pUpOpen     db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x5c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x5c, 0x5c, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x5c, 0x2c, 0x5c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x5c, 0x2c, 0x5c, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x2c, 0x2c, 0x5c, 0x00, 0x00, 0x00, 0x00, 0x5c, 0x5c, 0x2c, 0x5c, 0x00, 0x00, 0x00
            db 0x00, 0x5c, 0x2c, 0x2c, 0x2c, 0x5c, 0x00, 0x00, 0x00, 0x5c, 0x2c, 0x2c, 0x2c, 0x2c, 0x00, 0x00
            db 0x00, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x00, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x00, 0x00
            db 0x00, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2b, 0x00, 0x00
            db 0x00, 0x2c, 0x2c, 0x00, 0x00, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2b, 0x00, 0x00
            db 0x00, 0x2b, 0x2c, 0x0f, 0x00, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2b, 0x00, 0x00
            db 0x00, 0x00, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x2b, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2b, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x2b, 0x2b, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2c, 0x2b, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x2b, 0x2b, 0x2b, 0x2b, 0x2b, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00

pacmanDnOpen    db 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
                db 0x00,0x00,0x00,0x00,0x00,0x00,0x2b,0x2b,0x2b,0x2b,0x2b,0x00,0x00,0x00,0x00,0x00
                db 0x00,0x00,0x00,0x00,0x2b,0x2c,0x2c,0x2c,0x2c,0x2c,0x2c,0x2b,0x2b,0x00,0x00,0x00
                db 0x00,0x00,0x00,0x2b,0x2c,0x2c,0x2c,0x2c,0x2c,0x2c,0x2c,0x2c,0x2c,0x2b,0x00,0x00
                db 0x00,0x00,0x00,0x2c,0x2c,0x2c,0x2c,0x2c,0x2c,0x2c,0x2c,0x2c,0x2c,0x2c,0x00,0x00
                db 0x00,0x00,0x2b,0x2c,0x2c,0x2c,0x2c,0x2c,0x2c,0x2c,0x2c,0x00,0x0f,0x2c,0x2b,0x00
                db 0x00,0x00,0x2b,0x2c,0x2c,0x2c,0x2c,0x2c,0x2c,0x2c,0x2c,0x00,0x00,0x2c,0x2c,0x00
                db 0x00,0x00,0x2b,0x2c,0x2c,0x2c,0x2c,0x2c,0x2c,0x2c,0x2c,0x2c,0x2c,0x2c,0x2c,0x00
                db 0x00,0x00,0x2c,0x2c,0x2c,0x2c,0x2c,0x2c,0x00,0x2c,0x2c,0x2c,0x2c,0x2c,0x2c,0x00
                db 0x00,0x00,0x2c,0x2c,0x2c,0x2c,0x5c,0x00,0x00,0x00,0x5c,0x2c,0x2c,0x2c,0x5c,0x00
                db 0x00,0x00,0x00,0x5c,0x2c,0x5c,0x5c,0x00,0x00,0x00,0x00,0x5c,0x2c,0x2c,0x00,0x00
                db 0x00,0x00,0x00,0x5c,0x2c,0x5c,0x00,0x00,0x00,0x00,0x00,0x5c,0x2c,0x5c,0x00,0x00
                db 0x00,0x00,0x00,0x00,0x5c,0x5c,0x00,0x00,0x00,0x00,0x00,0x00,0x5c,0x00,0x00,0x00
                db 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
                db 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
                db 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00




section .bss
keyPressed resb 1  ; Reserve a byte for the state of the key
section .text
start:

        call drawMaze
; Main game loop
    gameloop:
        call clear_old_sprite
        call read_character_key_was_pressed
        call spawn_entities
        ; Delay to slow down animation
       mov cx, 64000
       waitloop:
       loop waitloop
        jmp gameloop
spawn_entities:
    mov di, [xPos]
    call draw_sprit
    ret
 ; End of game, return to text mode
; Function to read key pressed
read_character_key_was_pressed:
    mov ah, 00h
    int 16h
    cmp ah, 0E0h
    jne handle_input
    ret

handle_input:
    cmp ah, 4Dh   ; Right Key ;4DH             
    je move_right
    cmp ah, 4Bh    ; Left Key ;4BH   
    je move_left
    cmp ah, 48h   ; Up key ;48H        
    je move_up
    cmp ah, 50h  ; Down key ;50h
    je move_down
    cmp al, 27 ; esc key
    je esc
    ret

    ret

clear_old_sprite:
   
; Clear sprite at old position
    mov ax, 0A000h
    mov es, ax
    neg word [xVelocity]  ; Y * screen width
    add bx, [old_XPOS]  ; + X
    mov di, bx         ; DI = starting address for erasure
    mov cx, SPRITEH    ; Sprite height
.clear_line:
    push cx
    mov cx, SPRITEW    ; Sprite width
    mov al, 0          ; Background color for erasing
    rep stosb          ; Clear pixels with background color
    pop cx
    add di, 320 - SPRITEW  ; Move to next line for deletion
    loop .clear_line
    ret

move_right:
    call boucle_changeright
    mov bx, [xPos]
    add bx, 1 
    mov [xPos], bx
    ret
move_left:
    call boucle_changeleft
    mov bx, [xPos]
    sub bx, 1
    mov [xPos], bx
    ret

move_up:
    call boucle_changeUp
    mov bx, [xPos]
    sub bx, SCREENW
    mov [xPos], bx
    ret

move_down:
    call boucle_changedn
    mov bx, [xPos]
    add bx,  SCREENW
    mov [xPos], bx
    ret
esc:
    mov ax, 03h
    int 10h
    mov ax, 4C00h
    int 21h


   boucle_changeright:
        cmp si, pacmanClose
        jne .pacmanopnd
        jmp .pacmanclosd

    .pacmanopnd:
       mov si, pacmanOpen
       ret
     .pacmanclosd:
        mov si, pacmanClose
        ret

    boucle_changeleft:
        cmp si, pLeftClose
        jne .pacmanopend
        jmp .pacmanclosed

    .pacmanopend:
       mov si, pLeftOpen
       ret
     .pacmanclosed:
        mov si, pLeftClose
        ret

    boucle_changeUp:
        cmp si, pUpClose
        jne .pacmnopend
        jmp .pacmnclosed

    .pacmnopend:
       mov si, pUpOpen
       ret
    .pacmnclosed:
        mov si, pUpClose
        ret
    
    boucle_changedn:
        cmp si, pacmanDnOpen
        jne .pacmnopd
        jmp .pacmncd

    .pacmnopd:
       mov si,pacmanDnOpen
       ret
    .pacmncd:
        mov si, fraise
        ret


; Function to clear the screen
draw_sprit:
    mov ax, 0xA000
    mov es, ax
    mov dx, 16
            .eachLine:
            mov cx, 16
            rep movsb
        add di, SCREENW-16
        dec dx
        jnz .eachLine
    ret

