org 100h
%define SPRITEW 16

section .data

    xpos dw 200
    xvelo dw 320
    spritew dw 16


blinky      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x28, 0x28, 0x28, 0x28, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x28, 0x0F, 0x0F, 0x28, 0x28, 0x28, 0x28, 0x0f, 0x0f, 0x28, 0x28, 0x28, 0x00, 0x00, 0x00
            db 0x00, 0x0f, 0x0f, 0x0f, 0x0f, 0x28, 0x28, 0x0f, 0x0f, 0x0f, 0x0f, 0x28, 0x28, 0x28, 0x00, 0x00
            db 0x00, 0x09, 0x09, 0x0F, 0x0F, 0x28, 0x28, 0x09, 0x09, 0x0F, 0x0F, 0x28, 0x28, 0x28, 0x00, 0x00
            db 0x00, 0x09, 0x09, 0x0F, 0x0F, 0x28, 0x28, 0x09, 0x09, 0x0F, 0x0F, 0x28, 0x28, 0x28, 0x00, 0x00
            db 0x28, 0x28, 0x0F, 0x0F, 0x28, 0x28, 0x28, 0x28, 0x0F, 0x0F, 0x28, 0x28, 0x28, 0x28, 0x28, 0x00
            db 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x00
            db 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x00
            db 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x00
            db 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x00
            db 0x28, 0x28, 0x00, 0x28, 0x28, 0x28, 0x00, 0x00, 0x00, 0x28, 0x28, 0x28, 0x00, 0x28, 0x28, 0x00
            db 0x28, 0x00, 0x00, 0x00, 0x28, 0x28, 0x00, 0x00, 0x00, 0x28, 0x28, 0x00, 0x00, 0x00, 0x28, 0x00

inky        db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x01, 0x0F, 0x0F, 0x01, 0x01, 0x01, 0x01, 0x0f, 0x0f, 0x01, 0x01, 0x01, 0x00, 0x00, 0x00
            db 0x00, 0x0f, 0x0f, 0x0f, 0x0f, 0x01, 0x01, 0x0f, 0x0f, 0x0f, 0x0f, 0x01, 0x01, 0x01, 0x00, 0x00
            db 0x00, 0x09, 0x09, 0x0F, 0x0F, 0x01, 0x01, 0x09, 0x09, 0x0F, 0x0F, 0x01, 0x01, 0x01, 0x00, 0x00
            db 0x00, 0x09, 0x09, 0x0F, 0x0F, 0x01, 0x01, 0x09, 0x09, 0x0F, 0x0F, 0x01, 0x01, 0x01, 0x00, 0x00
            db 0x01, 0x01, 0x0F, 0x0F, 0x01, 0x01, 0x01, 0x01, 0x0F, 0x0F, 0x01, 0x01, 0x01, 0x01, 0x01, 0x00
            db 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x00
            db 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x00
            db 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x00
            db 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x00
            db 0x01, 0x01, 0x00, 0x01, 0x01, 0x01, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x00, 0x01, 0x01, 0x00
            db 0x01, 0x00, 0x00, 0x00, 0x01, 0x01, 0x00, 0x00, 0x00, 0x01, 0x01, 0x00, 0x00, 0x00, 0x01, 0x00
clyde       db 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
            db 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
            db 0x00,0x00,0x00,0x00,0x00,0x22,0x22,0x22,0x22,0x00,0x00,0x00,0x00,0x00,0x00,0x00
            db 0x00,0x00,0x00,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x00,0x00,0x00,0x00,0x00
            db 0x00,0x00,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x00,0x00,0x00,0x00
            db 0x00,0x22,0x0f,0x0f,0x22,0x22,0x22,0x22,0x0f,0x0f,0x22,0x22,0x22,0x00,0x00,0x00
            db 0x00,0x0f,0x0f,0x0f,0x0f,0x22,0x22,0x0f,0x0f,0x0f,0x0f,0x22,0x22,0x22,0x00,0x00
            db 0x00,0x28,0x28,0x0f,0x0f,0x22,0x22,0x28,0x28,0x0f,0x0f,0x22,0x22,0x22,0x00,0x00
            db 0x00,0x28,0x28,0x0f,0x0f,0x22,0x22,0x28,0x28,0x0f,0x0f,0x22,0x22,0x22,0x00,0x00
            db 0x22,0x22,0x0f,0x0f,0x22,0x22,0x22,0x22,0x0f,0x0f,0x22,0x22,0x22,0x22,0x22,0x00
            db 0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x00
            db 0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x00
            db 0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x00
            db 0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x00
            db 0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x00
            db 0x22,0x22,0x00,0x22,0x22,0x22,0x00,0x00,0x00,0x22,0x22,0x22,0x00,0x22,0x22,0x00
            db 0x22,0x00,0x00,0x00,0x22,0x22,0x00,0x00,0x00,0x22,0x22,0x00,0x00,0x00,0x22,0x00

 

pinky       db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x00, 0x00, 0x0E, 0x0E, 0x0E, 0x0E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x00, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x00, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x00, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x00, 0x00, 0x00, 0x00
            db 0x00, 0x0E, 0x0F, 0x0F, 0x0E, 0x0E, 0x0E, 0x0E, 0x0f, 0x0f, 0x0E, 0x0E, 0x0E, 0x00, 0x00, 0x00
            db 0x00, 0x0f, 0x0f, 0x0f, 0x0f, 0x0E, 0x0E, 0x0f, 0x0f, 0x0f, 0x0f, 0x0E, 0x0E, 0x0E, 0x00, 0x00
            db 0x00, 0x09, 0x09, 0x0F, 0x0F, 0x0E, 0x0E, 0x09, 0x09, 0x0F, 0x0F, 0x0E, 0x0E, 0x0E, 0x00, 0x00
            db 0x00, 0x09, 0x09, 0x0F, 0x0F, 0x0E, 0x0E, 0x09, 0x09, 0x0F, 0x0F, 0x0E, 0x0E, 0x0E, 0x00, 0x00
            db 0x0E, 0x0E, 0x0F, 0x0F, 0x0E, 0x0E, 0x0E, 0x0E, 0x0F, 0x0F, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x00
            db 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x00
            db 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x00
            db 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x00
            db 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x00
            db 0x0E, 0x0E, 0x00, 0x0E, 0x0E, 0x0E, 0x00, 0x00, 0x00, 0x0E, 0x0E, 0x0E, 0x00, 0x0E, 0x0E, 0x00
            db 0x0E, 0x00, 0x00, 0x00, 0x0E, 0x0E, 0x00, 0x00, 0x00, 0x0E, 0x0E, 0x00, 0x00, 0x00, 0x0E, 0x00




section .text

mov ah, 00h
mov al, 13h
int 10h

gameloop:
    

mov al, 0FFh
call clearScreen

mov si, clyde
mov di, [xpos]
call draw_pacman
mov cx, 64000

waitloop: 
loop waitloop

mov bx, [xpos]
add bx, [xvelo]
mov [xpos], bx  
cmp word [xpos], 20000-SPRITEW 
jb .noflip
neg word [xvelo]
.noflip:                                                         
jmp gameloop

mov ax, 0C01h
int 21h

mov ax, 03h
int 21h

int 20h



clearScreen:
    mov ax, 0xA000
    mov es, ax
    mov di, 0
    mov cx, 200*320
    rep stosb
    ret 


draw_pacman: 
    mov ax, 0xA000
    mov es, ax
    mov dx, 16
    .eachline:
        mov cx, 16
        rep movsb
        add di, 320-16
        dec dx
        jnz .eachline
        ret

